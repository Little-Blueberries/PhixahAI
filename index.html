<!DOCTYPE html>
<!--
					Contest: AI
				
		I have completed 100% of Khan Academy's 
		'Intro to HTML/CSS' and have been programming 
					for 25 months.
	
		I would prefer to be placed in the
					Intermediate
		   		    bracket
					   
		In creating this entry, I focused on make an AI chatbot that can chat with the user.
								
  One aspect I found challenging was to make the chatbot can understand the user question in case right syntax or wrong syntax.
								
				   I would like to highlight
		This chatbot use a TF-IDF and Consine Similarity to
		understand the user question if it is not at true
		grammar or it's at the same meaning but different way 
		to express, so it's use for the check the best match.
						for the judges.
					   
	TODO:
	 - Fill out statements above (Done)
	 - Save your entry as a spin-off of this program (Done)
	 - Have fun! (Done)
-->
<!--
    Credit @awesomeorion for the ka img and the thumbnail script
-->
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<title>PhixahAI (Testing)</title>
	<!-- Fonts -->
	<link rel="preconnect" href="https://fonts.googleapis.com" />
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
	<link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
		rel="stylesheet" />
	<link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&display=swap" rel="stylesheet" />
	<style>
		:root {
			/* Dark theme color variables */
			--color-dark-bg: #1b1b1b;
			--color-dark-bg-alt: #121212;
			--color-dark-text: #fff;
			--color-dark-border: #333;
			--color-dark-user-msg-bg: #292929;
			--color-dark-bot-msg-bg: #292929;
			--color-dark-input-bg: #292929;
			--color-dark-accessibility-bg: #292929;
			--color-dark-accessibility-hover: #414141;
			--color-dark-dot: #888;
			--color-dark-title: #fff;
			--color-dark-placeholder: #888;
			/* Light theme color variables */
			--color-light-bg: #f4f4f4;
			--color-light-bg-alt: #e9e9ee;
			--color-light-text: #222;
			--color-light-border: #ccc;
			--color-light-user-msg-bg: #e0e0e0;
			--color-light-bot-msg-bg: #e0e0e0;
			--color-light-input-bg: #e6e6e6;
			--color-light-accessibility-bg: #e0e0e0;
			--color-light-accessibility-hover: #bfc6e0;
			--color-light-dot: #888;
			--color-light-title: #222;
			--color-light-placeholder: #888;
		}

		/* Hide scrollbars for a cleaner look */
		body::-webkit-scrollbar,
		#chat-container::-webkit-scrollbar,
		#user-input::-webkit-scrollbar {
			display: none;
		}

		/* Flex layouts for main containers */
		#chat-container,
		.input-group,
		.function,
		.accessibility,
		.chat-container,
		.title-bar {
			display: flex;
		}

		#user-input:focus {
			outline: none;
		}

		.input-group:has(#user-input:focus) {
			box-shadow: 0 0 5px 0.001px rgb(145, 145, 145);
		}

		#user-input::placeholder {
			color: rgb(160, 160, 160);
		}

		#chatbot-title,
		#chat-container-title,
		#user-input {
			color: white;
		}

		body {
			font-family: "Montserrat", sans-serif;
			margin: 0;
			padding: 20px;
			background: var(--color-dark-bg);
			color: var(--color-dark-text);
		}

		#chatbot-title {
			animation: titleMov 3s ease-in-out infinite;
			font-size: 3em;
			font-weight: 700;
			margin: 0 0 10px;
			text-align: center;
			color: var(--color-dark-title);
		}

		#chat-container {
			border-radius: 8px;
			flex-direction: column;
			gap: 10px;
			height: 27.7em;
			overflow-y: auto;
			padding: 10px;
			justify-content: center;
			background: var(--color-dark-bg-alt);
			border: 1px solid var(--color-dark-border);
		}

		#chat-container-title {
			font-size: 1.5em;
			text-align: center;
		}

		.input-group {
			background: none;
			gap: 0.5em;
			margin-top: 10px;
		}

		#user-input {
			border: none;
			border-radius: 0.25em;
			font-size: 1em;
			line-height: 1.4em;
			padding: 1.25em 1em;
			width: 100%;
			background: var(--color-dark-input-bg);
			color: var(--color-dark-text);
		}

		.function {
			align-items: center;
			justify-content: flex-end;
			padding-right: 0.5em;
		}

		.accessibility {
			align-items: center;
			justify-content: center;
			padding: 0.4em;
			background: var(--color-dark-accessibility-bg);
		}

		.user-message,
		.bot-message {
			border-radius: 10px;
			max-width: 70%;
			font-family: "Segoe UI", Ubuntu, sans-serif;
			overflow-wrap: break-word;
			white-space: pre-wrap;
			animation: fadeIn 1s;
		}

		.user-message {
			align-self: flex-end;
			text-align: right;
		}

		.bot-message {
			align-self: flex-start;
			line-height: 1.5em;
			text-align: left;
		}

		.user-message .message,
		.bot-message .message {
			padding: 10px 20px;
		}

		.user-message img,
		.bot-message img {
			border-radius: 50%;
			margin: 0 10px;
		}

		.block {
			position: fixed;
			top: 0;
			left: 0;
			width: 100vw;
			height: 100vh;
			background: rgba(0, 0, 0, 0.45);
			z-index: 9998;
			display: flex;
			align-items: center;
			justify-content: center;
			animation: popupBgFadeIn 0.35s;
		}

		.popup {
			border: none;
			padding: 28px 28px 20px 28px;
			width: 50vw;
			position: fixed;
			top: 20%;
			left: 50%;
			transform: translate(-50%, -50%);
			z-index: 9999;
			border-radius: 18px;
			display: flex;
			flex-direction: column;
			align-items: center;
			animation: popupMoveFadeIn 1s;
		}

		.popup p {
			margin-bottom: 22px;
			text-align: center;
			font-size: 1.15em;
			font-weight: 500;
			letter-spacing: 0.01em;
		}

		.popup .popup-btn-row {
			display: flex;
			gap: 16px;
			justify-content: center;
			width: 100%;
		}

		.popup button {
			padding: 10px 28px;
			border-radius: 7px;
			border: none;
			background: var(--color-dark-accessibility-bg, #e0e0e0);
			color: var(--color-dark-text, #222);
			cursor: pointer;
			font-weight: 600;
			font-size: 1em;
			box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.08);
			transition: all 0.2s;
			font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
		}

		.dot-typing {
			display: inline-block;
			height: 8px;
			position: relative;
			width: 24px;
		}

		.dot-typing div {
			animation: dotTypingAnim 1s infinite ease-in-out;
			border-radius: 50%;
			height: 5px;
			position: absolute;
			width: 5px;
			background: var(--color-dark-dot);
		}

		.dot-typing div:nth-child(1) {
			animation-delay: 0s;
			left: 0;
		}

		.dot-typing div:nth-child(2) {
			animation-delay: 0.2s;
			left: 8px;
		}

		.dot-typing div:nth-child(3) {
			animation-delay: 0.4s;
			left: 16px;
		}

		/* Animations for fade and movement */
		@keyframes dotTypingAnim {

			0%,
			80%,
			100% {
				opacity: 0.5;
				transform: scale(0.8);
			}

			40% {
				opacity: 1;
				transform: scale(1.2);
			}
		}

		@keyframes titleMov {

			0%,
			100% {
				transform: translateY(0%);
			}

			50% {
				transform: translateY(-8%);
			}
		}

		@keyframes fadeIn {
			0% {
				opacity: 0;
				transform: translateY(100%);
			}

			100% {
				opacity: 1;
				transform: translateY(0%);
			}
		}

		@keyframes popupMoveFadeIn {
			0% {
				opacity: 0;
				top: -10em;
			}

			100% {
				opacity: 1;
				top: 20%;
			}
		}

		@keyframes popupMoveFadeOut {
			0% {
				opacity: 1;
				top: 20%;
			}

			100% {
				opacity: 0;
				top: -10em;
			}
		}

		@keyframes popupBgFadeIn {
			0% {
				opacity: 0;
			}

			100% {
				opacity: 1;
			}
		}

		@keyframes popupBgFadeOut {
			0% {
				opacity: 1;
			}

			100% {
				opacity: 0;
			}
		}

		html,
		body {
			max-width: 100vw;
			overflow-x: hidden;
		}

		*,
		*::after,
		*::before {
			transition: all 0.5s;
			box-sizing: border-box;
		}

		/* Light theme overrides */
		body.light-theme {
			background: var(--color-light-bg);
			color: var(--color-light-text);
		}

		body.light-theme #chatbot-title,
		body.light-theme #chat-container-title,
		body.light-theme #user-input {
			color: var(--color-light-title);
		}

		body.light-theme #chat-container {
			background: var(--color-light-bg-alt);
			border: 1px solid var(--color-light-border);
		}

		body.light-theme .user-message .message,
		body.light-theme .bot-message .message {
			background: var(--color-light-user-msg-bg);
			color: var(--color-light-text);
		}

		body.light-theme .input-group {
			background: none;
		}

		body.light-theme #user-input {
			background: var(--color-light-input-bg);
			color: var(--color-light-text);
		}

		body.light-theme #user-input::placeholder {
			color: var(--color-light-placeholder);
		}

		body.light-theme .accessibility {
			background: var(--color-light-accessibility-bg);
		}

		body.light-theme .accessibility:hover {
			background: var(--color-light-accessibility-hover);
			color: var(--color-light-text);
		}

		body.light-theme .dot-typing div {
			background: var(--color-light-dot);
		}

		body.light-theme .popup {
			background: var(--color-light-bg-alt);
			color: var(--color-light-text);
		}

		body.light-theme .popup button {
			background: var(--color-light-accessibility-bg);
			color: var(--color-light-text);
		}

		body.light-theme .popup button:hover {
			background: var(--color-light-dot);
			color: #fff;
		}

		body.light-theme .popup button.confirm {
			background: var(--color-light-accessibility-hover);
		}

		body.light-theme .popup button.confirm:hover {
			background: var(--color-light-dot);
			color: #fff;
		}

		/* Dark theme overrides */
		body.dark-theme {
			background: var(--color-dark-bg);
			color: var(--color-dark-text);
		}

		body.dark-theme #chatbot-title,
		body.dark-theme #chat-container-title,
		body.dark-theme #user-input {
			color: var(--color-dark-title);
		}

		body.dark-theme #chat-container {
			background: var(--color-dark-bg-alt);
			border: 1px solid var(--color-dark-border);
		}

		body.dark-theme .user-message .message,
		body.dark-theme .bot-message .message {
			background: var(--color-dark-user-msg-bg);
			color: var(--color-dark-text);
		}

		body.dark-theme .input-group {
			background: none;
		}

		body.dark-theme #user-input {
			background: var(--color-dark-input-bg);
			border: none;
			color: var(--color-dark-text);
		}

		body.dark-theme .accessibility {
			background: var(--color-dark-accessibility-bg);
		}

		body.dark-theme .accessibility:hover {
			background: var(--color-dark-accessibility-hover);
		}

		body.dark-theme .dot-typing div {
			background: var(--color-dark-dot);
		}

		body.dark-theme .popup {
			background: var(--color-dark-bg-alt);
			color: var(--color-dark-text);
			box-shadow: 0px 0px 10px 1px white;
		}

		body.dark-theme .popup button {
			background: var(--color-dark-accessibility-bg);
			color: var(--color-dark-text);
		}

		body.dark-theme .popup button:hover {
			background: var(--color-dark-dot);
			color: var(--color-dark-text);
		}

		body.dark-theme .popup button.confirm {
			background: var(--color-dark-accessibility-hover);
		}

		body.dark-theme .popup button.confirm:hover {
			background: var(--color-dark-dot);
			color: #fff;
		}
	</style>
</head>

<body class="dark-theme">
	<h1 id="chatbot-title">PHIXAH</h1>
	<div id="chat-container">
		<p id="chat-container-title">How can I help you today?</p>
	</div>
	<div class="input-group">
		<input type="text" id="user-input" placeholder="Enter your question or a math expression..." autocomplete="off"
			autocorrect="off" />
		<div class="function">
			<div id="clear-button" class="accessibility" onclick="clearChatBtn()" title="Clear chat history">
				<!-- SVG icon -->
				<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
					stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<polyline points="3 6 5 6 21 6" />
					<path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
					<line x1="10" y1="11" x2="10" y2="17" />
					<line x1="14" y1="11" x2="14" y2="17" />
				</svg>
			</div>
			<div id="switch-dark-light" class="accessibility" onclick="switchTheme()" title="Switch Dark/Light theme">
				<!-- SVG icon -->
				<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
					stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<circle cx="12" cy="12" r="5" />
					<path
						d="M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4" />
				</svg>
			</div>
		</div>
	</div>
	<script>
		// --- DOM elements --- //
		var chatContainer = document.getElementById("chat-container");
		var userInput = document.getElementById("user-input");

		// --- Chatbot System (TF-IDF + Cosine Similarity) --- //
		function ChatbotSystemNLP() {
			this.documents = [];
			this.responses = [];
			this.wordIDF = {};
		}
		// Check if that strings related to math
		ChatbotSystemNLP.prototype.checkIsMath = function (userInput) {
			var mathPattern = /\d+\s*[\+\-\*\/]\s*\d+/;
			return mathPattern.test(userInput);
		};
		// Solve Basic Math
		ChatbotSystemNLP.prototype.solveMath = function (userInput) {
			var match = userInput.match(/[\d\s\+\-\*\/\(\)\.]+/);
			var mathExpression = match ? match[0].trim() : "";
			if (mathExpression) {
				try {
					var result = eval(mathExpression);
					var arr = [
						"The value of " + mathExpression + " is " + result + ".",
						"The answer to that math expression is " + result + ".",
						"The result of that calculation is " + result + ".",
						"Calculating " + mathExpression + " gives us " + result + ".",
						"You asked for " +
						mathExpression +
						", and the answer is " +
						result +
						".",
						"The solution to " + mathExpression + " is " + result + ".",
					];
					return arr[Math.floor(Math.random() * arr.length)];
				} catch (e) {
					return (
						"Could not solve the expression '" +
						mathExpression +
						"': " +
						e.message
					);
				}
			}
			return "Could not find a clear mathematical expression in the string.";
		};
		// Add sample data
		ChatbotSystemNLP.prototype.addData = function (q, r) {
			this.documents.push(q.toLowerCase());
			this.responses.push(r);
		};
		// Compute TF
		ChatbotSystemNLP.prototype.calculateTF = function (word, doc) {
			var words = doc.split(/\s+/);
			var count = 0;
			for (var i = 0; i < words.length; i++) if (words[i] === word) count++;
			return count / words.length;
		};
		// Compute IDF
		ChatbotSystemNLP.prototype.calculateIDF = function (word) {
			if (this.wordIDF[word] !== undefined) return this.wordIDF[word];
			var count = 0;
			for (var i = 0; i < this.documents.length; i++)
				if (this.documents[i].split(/\s+/).indexOf(word) !== -1) count++;
			var idf = Math.log(this.documents.length / (1 + count)) + 1;
			this.wordIDF[word] = idf;
			return idf;
		};
		// Vectorize text
		ChatbotSystemNLP.prototype.computeVector = function (doc) {
			var words = doc.split(/\s+/);
			var tfidf = {};
			for (var i = 0; i < words.length; i++)
				if (!tfidf[words[i]])
					tfidf[words[i]] =
						this.calculateTF(words[i], doc) * this.calculateIDF(words[i]);
			return tfidf;
		};
		// Compute cosine similarity
		ChatbotSystemNLP.prototype.cosineSimilarity = function (v1, v2) {
			var sum = 0,
				mag1 = 0,
				mag2 = 0,
				key,
				keysObj = {};
			for (key in v1) keysObj[key] = true;
			for (key in v2) keysObj[key] = true;
			for (key in keysObj) {
				var a = v1[key] || 0,
					b = v2[key] || 0;
				sum += a * b;
				mag1 += a * a;
				mag2 += b * b;
			}
			if (mag1 === 0 || mag2 === 0) return 0;
			return sum / (Math.sqrt(mag1) * Math.sqrt(mag2));
		};
		// Find best answer
		ChatbotSystemNLP.prototype.findAnswer = function (userInput) {
			if (this.checkIsMath(userInput)) return this.solveMath(userInput);
			var inputVector = this.computeVector(userInput.toLowerCase()),
				maxScore = 0,
				answer = "Sorry, I can't understand";
			for (var i = 0; i < this.documents.length; i++) {
				var docVector = this.computeVector(this.documents[i]);
				var score = this.cosineSimilarity(inputVector, docVector);
				if (score > maxScore) {
					maxScore = score;
					answer = this.responses[i];
				}
			}
			return answer;
		};
		// --- Popup --- //
		function popupClose() {
			var block = document.querySelector(".block");
			var popup = document.querySelector(".popup");
			if (block && popup) {
				block.style.animation = "popupBgFadeOut 0.5s ease forwards";
				popup.style.animation = "popupMoveFadeOut 0.5s ease forwards";
				setTimeout(function () {
					if (block.parentNode) block.parentNode.removeChild(block);
					var disabled = document.querySelectorAll("[data-popup-disabled]");
					for (var i = 0; i < disabled.length; i++) {
						disabled[i].disabled = false;
						disabled[i].removeAttribute("data-popup-disabled");
					}
				}, 500);
			}
		}
		// Show confirmation popup
		function popupWidget(opt, btn1Text, btn2Text, btn1Func, btn2Func) {
			if (typeof opt === "object" && opt !== null) {
				this.text = opt.text || "";
				this.btn1Text = opt.btn1Text || "Cancel";
				this.btn1Func = opt.btn1Func || popupClose;
				this.btn2Text = opt.btn2Text || null;
				this.btn2Func = opt.btn2Func || null;
			} else {
				this.text = opt || "";
				this.btn1Text = btn1Text || "Cancel";
				this.btn1Func = btn1Func || popupClose;
				this.btn2Text = btn2Text || null;
				this.btn2Func = btn2Func || null;
			}
		}
		popupWidget.prototype.draw = function () {
			var oldBlock = document.querySelector(".block");
			if (oldBlock) oldBlock.remove();
			var allInputs = document.querySelectorAll(
				"input, button, textarea, select"
			);
			for (var i = 0; i < allInputs.length; i++)
				if (!allInputs[i].closest(".popup")) {
					allInputs[i].setAttribute("data-popup-disabled", "true");
					allInputs[i].disabled = true;
				}
			var blockElementBg = document.createElement("div");
			blockElementBg.className = "block";
			var popup = document.createElement("div");
			popup.className = "popup";
			var message = document.createElement("p");
			message.textContent = this.text;
			message.style.marginBottom = "18px";
			message.style.textAlign = "center";
			popup.appendChild(message);
			var btnRow = document.createElement("div");
			btnRow.className = "popup-btn-row";
			var btn1 = document.createElement("button");
			btn1.textContent = this.btn1Text || "Cancel";
			btn1.onclick = function () {
				if (typeof this.btn1Func === "function") this.btn1Func();
				var block = document.querySelector(".block"),
					popup = document.querySelector(".popup");
				if (block && popup) {
					block.style.animation = "popupBgFadeOut 0.5s ease forwards";
					popup.style.animation = "popupMoveFadeOut 0.5s ease forwards";
					setTimeout(function () {
						if (block.parentNode) block.parentNode.removeChild(block);
						var disabled = document.querySelectorAll("[data-popup-disabled]");
						for (var i = 0; i < disabled.length; i++) {
							disabled[i].disabled = false;
							disabled[i].removeAttribute("data-popup-disabled");
						}
					}, 500);
				}
			}.bind(this);
			btn1.className = "cancel";
			if (this.btn2Func) {
				var btn2 = document.createElement("button");
				btn2.textContent = this.btn2Text || "Confirm";
				btn2.onclick = function () {
					if (typeof this.btn2Func === "function") this.btn2Func();
					var block = document.querySelector(".block"),
						popup = document.querySelector(".popup");
					if (block && popup) {
						block.style.animation = "popupBgFadeOut 0.5s ease forwards";
						popup.style.animation = "popupMoveFadeOut 0.5s ease forwards";
						setTimeout(function () {
							if (block.parentNode) block.parentNode.removeChild(block);
							var disabled = document.querySelectorAll("[data-popup-disabled]");
							for (var i = 0; i < disabled.length; i++) {
								disabled[i].disabled = false;
								disabled[i].removeAttribute("data-popup-disabled");
							}
						}, 500);
					}
				}.bind(this);
				btn2.className = "confirm";
				btnRow.appendChild(btn2);
			}
			btnRow.appendChild(btn1);
			popup.appendChild(btnRow);
			blockElementBg.appendChild(popup);
			document.body.appendChild(blockElementBg);
		};
		// --- UI helper functions --- //
		function styleIfMessageNotExist() {
			document.getElementById("chat-container-title").style.display = "block";
			chatContainer.style.alignItems = "center";
			chatContainer.style.justifyContent = "center";
		}
		function styleIfMessageExist() {
			document.getElementById("chat-container-title").style.display = "none";
			chatContainer.style.alignItems = "normal";
			chatContainer.style.justifyContent = "normal";
		}
		// Switch theme
		function switchTheme() {
			var svgs, i;
			if (document.body.classList.contains("light-theme")) {
				document.body.classList.remove("light-theme");
				document.body.classList.add("dark-theme");
				svgs = document.querySelectorAll("svg");
				for (i = 0; i < svgs.length; i++)
					svgs[i].setAttribute("stroke", "white");
			} else if (document.body.classList.contains("dark-theme")) {
				document.body.classList.remove("dark-theme");
				document.body.classList.add("light-theme");
				svgs = document.querySelectorAll("svg");
				for (i = 0; i < svgs.length; i++)
					svgs[i].setAttribute("stroke", "black");
			} else {
				document.body.classList.add("dark-theme");
			}
		}
		// Delete chat history
		function clearChat() {
			var nodes = chatContainer.querySelectorAll("*");
			for (var i = 0; i < nodes.length; i++)
				if (nodes[i].id !== "chat-container-title") nodes[i].remove();
			styleIfMessageNotExist();
		}
		// Escape HTML
		function removeHTML(str) {
			if (typeof str !== "string") str = String(str);
			return str
				.replace(/&/g, "&amp;")
				.replace(/</g, "&lt;")
				.replace(/>/g, "&gt;")
				.replace(/"/g, "&quot;")
				.replace(/'/g, "&#039;");
		}
		// Add message to chat
		function addMessage(message, isUser) {
			var msgContainer = document.createElement("div"),
				msg = document.createElement("div"),
				msgIMG = document.createElement("img");
			msgContainer.style.display = "flex";
			msgContainer.style.alignItems = "center";
			msgContainer.className = isUser ? "user-message" : "bot-message";
			msg.className = "message";
			msg.innerHTML = removeHTML(message);
			msgIMG.setAttribute(
				"src",
				isUser
					? "https://www.khanacademy.org/computer-programming/ka-img/5819110027018240/4850698350084096.png"
					: "https://www.khanacademy.org/computer-programming/phixah-ico/6442661011963904/5033284292689920.png"
			);
			msgIMG.style.width = "2em";
			msgIMG.style.height = "2em";
			if (isUser) {
				msgContainer.appendChild(msg);
				msgContainer.appendChild(msgIMG);
			} else {
				msgContainer.appendChild(msgIMG);
				msgContainer.appendChild(msg);
			}
			chatContainer.appendChild(msgContainer);
			styleIfMessageExist();
		}
		// Message sending processing
		function handleUserMessage() {
			var message = userInput.value.trim();
			if (message) {
				addMessage(message, true);
				var loadingMsg = document.createElement("div");
				loadingMsg.className = "bot-message loading";
				loadingMsg.innerHTML =
					'<div class="dot-typing"><div></div><div></div><div></div>';
				chatContainer.appendChild(loadingMsg);
				chatContainer.scrollTop = chatContainer.scrollHeight;
				userInput.value = "";
				setTimeout(function () {
					var response = chatbot.findAnswer(message);
					chatContainer.removeChild(loadingMsg);
					addMessage(response, false);
				}, 2000);
			}
		}
		// --- Initialize sample data --- //
		var chatbot = new ChatbotSystemNLP();
		var dataTesting = {
			"Hello !": "Hello, how can I assist you today?",
			"Hi !": "Hi! How are you?",
			"I'm good, thanks": "",
		};
		for (var question in dataTesting)
			if (dataTesting.hasOwnProperty(question))
				chatbot.addData(question, dataTesting[question]);
		styleIfMessageNotExist();
		// Show confirmation popup to clear chat
		function clearChatBtn() {
			var warningRemove = new popupWidget({
				text: "Are you sure? All things can't be undone!",
				btn1Text: "Cancel",
				btn1Func: popupClose,
				btn2Text: "Confirm",
				btn2Func: clearChat,
			});
			warningRemove.draw();
		}
		// Listen for Enter key
		userInput.addEventListener("keydown", function (e) {
			if (!document.querySelector(".loading")) {
				if (e.key === "Enter" && !e.shiftKey) {
					e.preventDefault();
					handleUserMessage();
				}
			}
		});
	</script>

	<!--The Thumbnail Script 2.1.0 12/18/2023 by Bluebird@kaid_157624541333313939750668-->
	<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
	<script type>var r = 600;var s = document.documentElement.clientWidth;window.parent.html2canvas = function (t) {try {html2canvas(document.body, {width: s,height: s,useCORS: true,onclone: function (t) {var anims = t.getAnimations();for (var i = 0; i < anims.length; i++) {try {anims[i].finish();} catch (e) { }}}}).then(function (t) {var e = document.createElement("canvas");e.width = r;e.height = r;e.getContext("2d").drawImage(t, 0, 0, t.width, t.height, 0, 0, r, r);window.top.postMessage(e.toDataURL(), "*");}).catch(function (t) {alert("Thumbnail Script Error: " + t);});} catch (err) {window.top.postMessage(document.createElement("canvas").toDataURL(),"*");}};
</script>
</body>

</html>